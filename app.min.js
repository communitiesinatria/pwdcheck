function hexString(t){const e=new Uint8Array(t),s=[...e].map(t=>{const e=t.toString(16),s=e.padStart(2,"0");return s.toUpperCase()});return s.join("")}function digestMessage(t){const e=new TextEncoder,s=e.encode(t);return window.crypto.subtle.digest("SHA-1",s)}async function runCheck(t){if(""===t)return;const e=await digestMessage(t);hash=hexString(e),first=hash.substring(0,5),last=hash.substring(5);const s=await fetch("https://api.pwnedpasswords.com/range/"+first);if(200!==s.status)return console.log("Looks like there was a problem. Status Code: "+s.status),!1;const n=await s.text(),o=n.split("\r\n");let a=null;return o.forEach(e=>{const s=e.split(":");s[0]==last&&(a={text:t,hash:hash,count:s[1]})}),a}function onsubmit(t){console.log("running");const e=document.querySelector("input").value,s=document.querySelector(".output");(async()=>{s.className="output",state("searching");const t=await runCheck(e);s.classList.remove("searching"),t?state("warn",t):state("safe")})()}function state(t,e){"warn"===t?setState("warn","YOUR PASSWORD IS LEAKED",`your password was found ${e.count} times in leaked password dumps`):"safe"===t?setState("safe","Your Password is safe to use",""):"searching"===t&&setState("searching","ðŸ˜°","searching....")}function setState(t,e,s){if(window.CURRENT_STATE!==t){const n=document.querySelector(".output"),o=n.querySelector("h1"),a=n.querySelector("span");n.className="output "+t,o.textContent=e,a.textContent=s,window.CURRENT_STATE=t}}let first="",last="",hash="";document.querySelector("input").addEventListener("input",t=>{if(t.target.value)onsubmit(t);else{const t=document.querySelector(".output");t.className="output"}}),document.querySelector("form").addEventListener("submit",t=>{t.preventDefault(),onsubmit(t),document.querySelector("input").value=""});